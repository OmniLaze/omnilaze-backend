# 阿里云SMS配置指南

## 快速配置步骤

### 1. 获取AccessKey（5分钟）

1. 登录[阿里云控制台](https://ram.console.aliyun.com)
2. 点击右上角头像 → AccessKey管理
3. 创建AccessKey（建议创建子账号的AccessKey更安全）
4. 记录下：
   - `AccessKey ID`
   - `AccessKey Secret`

### 2. 开通短信服务（5分钟）

1. 访问[短信服务控制台](https://dysms.console.aliyun.com/)
2. 首次使用需要开通服务（免费开通）
3. 充值少量金额用于测试（如10元）

### 3. 申请短信签名（1-2小时审核）

1. 在短信控制台点击"国内消息" → "签名管理" → "添加签名"
2. 填写信息：
   - 签名名称：如"OmniLaze"或你的公司/网站名
   - 签名来源：选择合适的类型
   - 上传相关证明材料
3. 提交审核，通常1-2小时通过
4. 审核通过后，记录签名名称

### 4. 申请短信模板（1-2小时审核）

1. 在短信控制台点击"国内消息" → "模板管理" → "添加模板"
2. 选择模板类型："验证码"
3. 填写模板内容，例如：
   ```
   您的验证码是${code}，请在5分钟内完成验证。
   ```
4. 提交审核
5. 审核通过后，记录模板CODE（如：SMS_123456789）

### 5. 配置环境变量

编辑 `.env` 文件：

```bash
# 复制示例配置
cp .env.example .env

# 编辑配置文件
vim .env
```

填入你的配置：
```env
ALIYUN_ACCESS_KEY_ID=你的AccessKey_ID
ALIYUN_ACCESS_KEY_SECRET=你的AccessKey_Secret
ALIYUN_SMS_SIGN_NAME=你的短信签名
ALIYUN_SMS_TEMPLATE_CODE=SMS_你的模板CODE
```

### 6. 重启后端服务

```bash
# 停止当前服务（Ctrl+C）
# 重新启动
npm run dev
```

## 测试验证

1. 确保后端服务运行正常
2. 在前端输入你的手机号
3. 点击"发送验证码"
4. 检查手机是否收到短信

## 常见问题

### Q: 短信发送失败，提示"签名不合法"
A: 确保签名已审核通过，并且填写的签名名称完全一致

### Q: 短信发送失败，提示"模板不合法"
A: 确保模板已审核通过，模板CODE正确

### Q: 短信发送失败，提示"余额不足"
A: 需要在阿里云账户充值

### Q: 开发测试阶段的建议
- 申请签名时可以使用"测试专用"作为签名
- 每个手机号每天有发送次数限制（通常10次）
- 建议准备2-3个测试手机号

## 费用说明
- 国内短信：约0.045元/条
- 测试阶段10元足够使用很久

## 安全提示
⚠️ **重要**：不要将AccessKey提交到Git仓库！
- `.env` 文件已在 `.gitignore` 中
- 生产环境使用环境变量或密钥管理服务